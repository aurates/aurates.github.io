<!-- Archive Page - Posts grouped by year, date on left -->
<div class="animate-fade-in">
  <!-- Page Header -->
  <header class="glass-card rounded-3xl p-8 md:p-12 mb-12 text-center">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">
      <% if (page.category) { %>
        Category: <%= page.category %>
      <% } else if (page.tag) { %>
        Tag: <%= page.tag %>
      <% } else { %>
        Archives
      <% } %>
    </h1>
    <p class="text-slate-400 text-lg">
      <%= page.posts.length %> posts in total
    </p>
  </header>

  <!-- Posts grouped by year -->
  <div class="space-y-12">
    <% 
      var years = {};
      page.posts.each(function(post) {
        var year = date(post.date, 'YYYY');
        if (!years[year]) years[year] = [];
        years[year].push(post);
      });
      var sortedYears = Object.keys(years).sort((a, b) => b - a);
    %>

    <% sortedYears.forEach(function(year) { %>
      <section class="animate-fade-in" style="animation-delay: 0.1s;">
        <!-- Year Header -->
        <h2 class="text-3xl font-bold mb-6 flex items-center gap-4">
          <span class="glass-card px-6 py-2 rounded-full text-purple-400"><%= year %></span>
          <span class="flex-1 h-px bg-white/10"></span>
        </h2>

        <!-- Posts for this year -->
        <div class="space-y-4 ml-4">
          <% years[year].forEach(function(post, index) { %>
            <article class="glass-card rounded-2xl p-6 hover:scale-[1.01] transition-all group animate-slide-up" style="animation-delay: <%= index * 0.05 %>s;">
              <div class="flex flex-col md:flex-row md:items-center gap-4">
                <!-- Date on the left -->
                <time datetime="<%= date_xml(post.date) %>" class="text-slate-500 font-mono text-sm md:w-28 flex-shrink-0">
                  <%= date(post.date, 'MMM DD') %>
                </time>
                
                <!-- Post info -->
                <div class="flex-1 min-w-0">
                  <a href="<%- url_for(post.path) %>" class="block">
                    <h3 class="text-xl font-semibold group-hover:text-purple-400 transition-colors truncate">
                      <%= post.title || '(Untitled)' %>
                    </h3>
                  </a>
                  
                  <% if (post.categories && post.categories.length) { %>
                    <div class="flex flex-wrap gap-2 mt-2">
                      <% post.categories.each(function(cat) { %>
                        <a href="<%- url_for(cat.path) %>" class="text-sm text-slate-400 hover:text-purple-400 transition-colors">
                          üìÅ <%= cat.name %>
                        </a>
                      <% }); %>
                    </div>
                  <% } %>
                </div>

                <!-- Arrow indicator -->
                <svg class="w-5 h-5 text-slate-500 group-hover:text-purple-400 group-hover:translate-x-1 transition-all flex-shrink-0 hidden md:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
              </div>
            </article>
          <% }); %>
        </div>
      </section>
    <% }); %>
  </div>

  <!-- Empty State -->
  <% if (page.posts.length === 0) { %>
    <div class="glass-card rounded-3xl p-12 text-center">
      <p class="text-slate-400 text-lg">No posts found.</p>
    </div>
  <% } %>
</div>
